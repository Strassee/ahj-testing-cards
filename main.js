/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function t(t,s){return!!(t.length>=s[0].digits[0]&&t.length<=s[0].digits[1]&&function(t){let s=[...t.toString()].map(Number).reverse();return s.reduce(((t,s,e)=>e%2?t+(2*s>9?2*s-9:2*s):t+s),0)%10==0}(t))}const s=[{id:4,type:"visa",digits:[16,16]},{id:5,type:"master",digits:[16,16]},{id:22,type:"mir",digits:[16,19]},{id:35,type:"jcb",digits:[16,19]}];class e{constructor(t){this.parentEl=t,this.systemDefined=!1,this.onInput=this.onInput.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onClear=this.onClear.bind(this)}static get markup(){return'\n        <div class="cardsform">\n          <div class="cardsystems">\n            <h3>Check your credit card number</h3>\n            <ul class="cards list-unstyled">\n              <li><span class="card mir" title="МИР">МИР</span></li>\n              <li><span class="card visa" title="Visa">Visa</span></li>\n              <li><span class="card master" title="Mastercard">Mastercard</span></li>\n              <li><span class="card jcb" title="JCB">JCB</span></li>\n            </ul>\n          </div>\n          <form class="form">\n            \x3c!-- <label for="input">Check your credit card number</label> --\x3e\n\n            <input type="text" class="input" id="input" maxlength="22">\n            <span class="clear">&#10060;</span>\n            <input type="submit" class="btn btn-success" value="Click to Validate">\n          </form>\n          <div class="result"></div>\n        </div>\n      '}static get submitSelector(){return".btn"}static get inputSelector(){return".input"}static get selector(){return".cardsform"}static get result(){return".result"}static get card(){return".card"}static get clear(){return".clear"}bindToDOM(){this.parentEl.innerHTML=e.markup,this.element=this.parentEl.querySelector(e.selector),this.submit=this.element.querySelector(e.submitSelector),this.input=this.element.querySelector(e.inputSelector),this.result=this.element.querySelector(e.result),this.cards=Array.from(this.element.querySelectorAll(e.card)),this.clear=this.element.querySelector(e.clear),this.input.addEventListener("input",this.onInput),this.element.addEventListener("submit",this.onSubmit),this.clear.addEventListener("click",this.onClear)}onInput(t){this.result.textContent="",this.result.classList.value="result";const s=this.input.value.replaceAll(" ","");Number.isInteger(Number(s))?this.CardSystem(s):this.isResult("Input Error",0)}CardSystem(t){const e=function(t){const e=s.filter((s=>String(s.id).length>=t.length?String(s.id).slice(0,t.length)===t:t.slice(0,String(s.id).length)===String(s.id)));return 0!==e.length&&e}(t);if(!1===e)return this.isResult("Card system is not found",0),!1;let i=[];e.forEach((t=>i.push(t.type))),this.cards.forEach((t=>{i.includes(Array.from(t.classList)[1])?t.classList.remove("cdisabled"):t.classList.add("cdisabled"),this.systemDefined=e}))}isResult(t,s){0===s?(this.cards.forEach((t=>t.classList.remove("cdisabled"))),this.input.value="",this.systemDefined=!1,this.result.classList.add("error")):1===s&&this.result.classList.add("success"),this.result.textContent=t}onSubmit(s){s.preventDefault(),this.result.textContent="",this.result.classList.value="result";const e=this.input.value.replaceAll(" ","");this.input.value=e,0!==e.length?1===this.systemDefined.length&&t(e,this.systemDefined)?this.isResult("Card is Valid",1):this.isResult("Card is not valid",0):this.isResult("Input Error",0)}onClear(t){this.cards.forEach((t=>t.classList.remove("cdisabled"))),this.input.value="",this.systemDefined=!1,this.result.classList.value="result",this.result.textContent=""}}document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".app");new e(t).bindToDOM()}))})();